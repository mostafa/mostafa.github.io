<!DOCTYPE html>
<html>

  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <title>Load Testing Your API with Postman</title>
    <meta name="description" content="In this article, I’ll explain how to use a Postman collection I have created to load test our instance of our test API. The process is pretty straightforward...">

    
    
    <link rel="stylesheet" href="https://mostafa.dev/assets/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:ital,wght@0,400;0,700;1,400;1,700&amp;display=swap" rel="stylesheet">
    <link rel="canonical" href="https://mostafa.dev/blog/load-testing-your-api-with-postman">
    <link rel="alternate" type="application/rss+xml" title="Mostafa's personal blog" href="https://mostafa.dev/feed.xml">

    <script async defer src="https://buttons.github.io/buttons.js"></script>
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Load Testing Your API with Postman | Mostafa’s personal blog</title>
<meta name="generator" content="Jekyll v4.0.1">
<meta property="og:title" content="Load Testing Your API with Postman">
<meta property="og:locale" content="en_US">
<meta name="description" content="How to load test your API using your existing Postman collections and k6?">
<meta property="og:description" content="How to load test your API using your existing Postman collections and k6?">
<link rel="canonical" href="https://mostafa.dev/blog/load-testing-your-api-with-postman">
<meta property="og:url" content="https://mostafa.dev/blog/load-testing-your-api-with-postman">
<meta property="og:site_name" content="Mostafa’s personal blog">
<meta property="og:image" content="https://mostafa.dev/img/1*Qe-NONu2psPiePB_MX1RjA.png">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2020-04-21T00:00:00+02:00">
<script type="application/ld+json">
{"@type":"BlogPosting","url":"https://mostafa.dev/blog/load-testing-your-api-with-postman","headline":"Load Testing Your API with Postman","dateModified":"2020-04-21T00:00:00+02:00","datePublished":"2020-04-21T00:00:00+02:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://mostafa.dev/blog/load-testing-your-api-with-postman"},"image":"https://mostafa.dev/img/1*Qe-NONu2psPiePB_MX1RjA.png","description":"How to load test your API using your existing Postman collections and k6?","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <style>
        body {
            font-family: 'Ubuntu', sans-serif;
            font-size: 16px;
            line-height: 2;
            color: #181818;
            background-color: #fff;
        }

        .subtitle {
            color: rgba(0, 0, 0, 0.54) !important;
        }
    </style>
</head>

  <body>

    <header class="border-bottom-thick px-2 clearfix">
  <div class="left sm-width-full py-1 mt-1 mt-lg-0">
    <a class="align-middle link-primary text-accent" href="/">
      Mostafa's personal blog
    </a>
  </div>
  <div class="right sm-width-full">
    <ul class="list-reset mt-lg-1 mb-2 mb-lg-1">
      
        
      
        
        <li class="inline-block">
          <a class="align-middle link-primary mr-2 mr-lg-0 ml-lg-2" href="/about/">
            About
          </a>
        </li>
        
      
        
      
        
      
        
      
        
      
        
      
    </ul>
  </div>
</header>


    <div>
      <article class="container px-2 mx-auto mb4" itemscope itemtype="http://schema.org/BlogPosting">
    <h1 class="h1 col-9 sm-width-full mt-3 mb-0 pb-0 inline-block" itemprop="name headline">Load Testing Your API with Postman</h1>
    
        <h3 class="h3 col-9 sm-width-full mb-0 mt-0 inline-block subtitle" itemprop="name headline">How to load test your API using your existing Postman collections and k6?
        </h3>
    
    
        <img class="col-12" src="/img/1*Qe-NONu2psPiePB_MX1RjA.png">
    
    <div class="col-3 sm-width-full mt-1 border-top-thin ">
        <p class="mb-3 py-2 h4">
            <time datetime="2020-04-21T00:00:00+02:00" itemprop="datePublished">Apr 21, 2020</time>
        </p>
    </div>

    <div class="prose" itemprop="articleBody">
        <p>In this article, I’ll explain how to use a Postman collection I have created to load test our instance of our test API. The process is pretty straightforward, as is shown below. You need to feed your exported Postman collection to our postman-to-k6 converter, and use the generated k6 script to load test your own API.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># convert postman collection to k6 test</span>
<span class="nv">$ </span>postman-to-k6 test-api.json <span class="nt">-e</span> env.json <span class="nt">-o</span> k6-script.js
<span class="c"># run load test  </span>
<span class="nv">$ </span>k6 run <span class="nt">--vus</span> 100 <span class="nt">--duration</span> 5m k6-script.js
</code></pre></div></div>
<h3 id="our-test-api--its-testing-scenario">Our Test API &amp; Its Testing Scenario</h3>

<p>In order to demonstrate the power of k6 in different scenarios, we have created our test API with various example endpoints, which is available at <a href="https://test-api.k6.io">test-api.k6.io</a>. These endpoints are available in the Postman collection:</p>

<h3 id="public-apis">Public APIs</h3>

<ul>
  <li>List all public crocodiles</li>
  <li>Get a single public crocodile
    <h3 id="registration-and-authentication">Registration and authentication</h3>
  </li>
  <li>Register a new user</li>
  <li>Bearer/JWT token authentication
    <h3 id="private-apis">Private APIs</h3>
  </li>
  <li>List all your crocodiles</li>
  <li>Get a single crocodile</li>
  <li>Create a new crocodile (max 100)</li>
  <li>Update your crocodile</li>
  <li>Update selected fields on your crocodile</li>
  <li>Remove your crocodile
The scenario is to test all the public and private APIs. For the private APIs, a user is created and its token is extracted. The extracted token is used to make other API calls. The order is very important in the private APIs, since you cannot delete a non-existing resource, for example. By the way, crocodile is our mascot.</li>
</ul>

<h3 id="our-test-api-postman-collection">Our Test API Postman Collection</h3>

<p>To ease testing of our test API and demonstrate the usage of our Postman to k6 converter, I’ve created a Postman collection with almost all of our test API requests. You’ll see how you can access this Postman collection shortly.</p>

<p><img src="/img/1*1IOClfhM1VmtqaSXUn4nzA.png" alt=""></p>

<p>This collection includes a set of collection variables, environment variables, pre-scripts, tests, authorization with two different mechanisms, and usages of the <a href="https://learning.postman.com/docs/postman/scripts/postman-sandbox-api-reference/">Postman Sandbox API</a>.</p>

<h3 id="load-testing-our-test-api-with-the-postman-collection">Load Testing Our Test API with The Postman Collection</h3>

<p>We have created a tool that converts your Postman collection to k6 script, which is called <a href="https://github.com/loadimpact/postman-to-k6">postman-to-k6</a>. You can read more about its features in its <a href="https://blog.loadimpact.com/new-postman-to-k6-converter-tool-with-support-for-pre-request-and-test-scripts">release notes</a>.</p>

<p>In order to convert your Postman collection to k6 script, you should take the following steps:</p>

<p><strong>1. Optional: Clone the repository and skip to the step 5</strong>:</p>

<p>I’ve created a repository for this article that contains the exported Postman collection, along with the converted script and related files. You can clone the repository and import the test-api.json and env.json files into the Postman application and possibly play with them if you want.</p>

<p>This repository contains everything that is needed for load testing our test API, so you can skip to step 4. When using your own collection, you should take all the steps to be able to have a k6 script out of your Postman collection, and to be able to run your load test with it.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>git clone &lt;https://github.com/k6io/example-postman-collection.git&gt;
</code></pre></div></div>

<p><strong>2. Install Node.js (if you haven’t already done so)</strong>:</p>

<p>For this, I highly recommend that you use something like <a href="https://github.com/nvm-sh/nvm">nvm</a>, which is a Node.js version manager that you can use to have multiple version of Node.js at the same time on your machine and be able to switch to any of them quickly.</p>

<p><strong>3. Install the postman-to-k6 tool</strong>:</p>

<p>The <a href="https://github.com/loadimpact/postman-to-k6">postman-to-k6</a> tool is developed to help you convert the requests inside your Postman collections to k6 scripts, which are actually JavaScript code.</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>npm <span class="nb">install</span> <span class="nt">-g</span> postman-to-k6
</code></pre></div></div>

<p><strong>4. Convert your exported Postman collection to k6 script</strong>:</p>

<p>Assuming your exported collection is named test-api.json, you can run this command to convert it to a k6 script. The env.json includes all your environment variables that are exported from Postman.</p>

<p>$ postman-to-k6 test-api.json -e env.json -o k6-script.jsIf you need more fine-tuning of your test (like we did above), like adding data or changing environment variables inside your code, just take a look at the Options section of the <a href="https://github.com/loadimpact/postman-to-k6#options">postman-to-k6 README</a>.</p>

<p>The script generated by the converter should look like below. As you see, I’ve manually added the <a href="https://k6.io/docs/using-k6/options#duration">duration</a> (of the test run) to be 1 minute and also added the <a href="https://k6.io/docs/using-k6/options#vus">virtual users (VU)</a> count. These two options let the script run for a minute with 100 virtual users. These 100 VUs try to make as many requests as they can to test the server, which you’ll see in the next screenshot.</p>

<p>The generated script is a little bit different from normal k6 scripts, since it includes various abstractions to support different Postman functionality, but you can mix them with regular <a href="https://docs.k6.io/docs/http-requests">http requests</a> from k6. Also, there is a libs directory beside the script that includes shims and libraries needed for the Postman scripts to work correctly.</p>

<p><strong>5. Install k6</strong>:</p>

<p>k6 supports various platforms, including Windows, Linux, macOS and docker. In order to <a href="https://docs.k6.io/docs/installation">install</a> it, just grab an <a href="https://dl.bintray.com/loadimpact/windows/k6-latest-amd64.msi">Windows installer</a> or a <a href="https://hub.docker.com/r/loadimpact/k6">docker image</a> and run it on your machine. On Linux distributions, you can use <a href="https://docs.k6.io/docs/installation#section-linux-deb-and-rpm-packages">APT or YUM</a>, and on macOS, you can use <a href="https://docs.k6.io/docs/installation#section-mac-brew">Homebrew</a>.</p>

<p><em>NOTE:</em> Regarding installation on Windows, you can also use <a href="https://chocolatey.org/packages/k6">choco k6 package</a>.</p>

<p><strong>6. Run k6 with the generated script</strong>:</p>

<p>Now that you have your collections converted into a k6 script, you can invoke k6 like this:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>k6 run k6-script.js
</code></pre></div></div>

<p>The result of running the script is shown in the following console output:</p>

<h3 id="remarks-about-using-the-postman-to-k6-converter">Remarks about using the postman-to-k6 converter</h3>

<p><strong>1️. Should we base our load tests on the Postman converter and our Postman collections?</strong></p>

<p>If you’re using the converter as a way of onboarding, no. If you expect to convert your collection continuously and without doing a lot of manual edits afterwards, yes.</p>

<p>We recommend you to use the converter as an easy way to onboard and then rewrite your scripts to idiomatic k6 code, as we believe it to be more maintainable and less likely to degrade over time. If you convert from postman collections continuously, however, and run the script output as-is, it might make sense to keep it as is.</p>

<p><strong>2. Is everything available out of the box in the converted script?</strong></p>

<p>No. Since k6 uses Goja to run JavaScript, and it is not compatible with browsers’ and Node.js APIs, hence there are some missing functionality. This can be fixed by <a href="https://k6.io/docs/using-k6/modules">importing bundled JavaScript modules</a>. For a list of compatible libraries, please see <a href="https://jslib.k6.io/">jslib.k6.io</a>.</p>

<p><strong>3. What adjustments did you make to the script to make it work?</strong></p>

<p>First, I removed the pre-script containing pm.sendRequest, because it is not supported by the converter. Then, I replaced the jsonData.hasOwnProperty syntax with the equivalent k6 syntax for <a href="https://k6.io/docs/javascript-api/k6-http/response-k6-http">extracting JSON response information</a>: response.json(“selector”).</p>

<p><img src="/img/0*TWNwoEeJEr0z9YUb.png" alt="">### Postman API vs. k6 API</p>

<p>Here’s a quick comparison of the <a href="https://learning.postman.com/docs/postman/scripts/postman-sandbox-api-reference/">Postman API</a> versus the <a href="https://k6.io/docs/javascript-api">k6 API</a>. To be fair, I have included features from Postman GUI application. Since k6 is scriptable from the start, you have the option to write the logic in JavaScript. Postman also supports javascript to do various tasks, but the focus is on exposing features via a richer set of GUI elements.</p>

<p>As you saw above, there are many features supported by each API, each to some extent. Some features needs external libraries, some are internal. Both APIs are scriptable in JavaScript, and not everything is supported by both, due to the various browser and Node.js APIs used in the libraries.</p>

<p>Yet, there are some features only available on k6, which is partially due to the fact that the Postman is catered for API testing or API functional testing, but k6 is focused more on API load testing.</p>

<h4 id="functional-testing-vs-load-testing">Functional testing vs. load testing</h4>

<p>Functional testing concerns with giving input to the system (as a black-box) via an API and examining the results, while load testing is basically doing the same thing as functional testing, but with additional <strong>load</strong> on the input to the system.</p>

<p>Functional testing provides input on each endpoint, and the returned results are verified in terms of correctness against a set of specifications. In turn, load testing provides a huge amount of load on each endpoint, and rather tries to aggregate the metadata returned by all the responses.</p>

<h4 id="load-testing-metrics-for-measuring-performance">Load testing metrics for measuring performance</h4>

<p>Concerning the measurements, the metadata will include the time it took for the request to settle and the response to return, which are measure by various <a href="https://k6.io/docs/using-k6/metrics">metrics</a>. For example you can measure the HTTP request duration of all requests and get their minimum, maximum, average, median, 90th and 95th percentiles.</p>

<h4 id="passfail-a-test-with-thresholds">Pass/fail a test with thresholds</h4>

<p>You also have the option to pass/fail a test if it does/doesn’t reach certain <a href="https://k6.io/docs/using-k6/thresholds">threshold(s)</a>. For example, you can specify that you want the average response time to be less than 500ms. If the average is below that, the test will fail, much like asserts in software testing.</p>

<h4 id="filter-results-with-tags">Filter results with tags</h4>

<p>Since you’re dealing with lots of different results from different endpoints, your life would be easier if you could filter the results. <a href="https://k6.io/docs/using-k6/tags-and-groups#tags">Tags</a> are supported by k6 to fulfill this requirement.</p>

<h4 id="load-testing-websocket-servers">Load testing WebSocket servers</h4>

<p>In terms of protocol implementation, <a href="https://k6.io/docs/using-k6/protocols/websockets">WebSocket</a> is one of the features available only in k6, compared to Postman, and you can load test your WebSocket server with it.</p>

<h3 id="conclusion">Conclusion</h3>

<p>In this article I’ve tried to give a quick introduction to Postman, the postman-to-k6 converter and our k6 load testing tool. All these tools combined can help you turn your API requests in Postman into k6 script in order to load test your API. Many of the Postman features are supported by the postman-to-k6 tool.</p>

<p>Our ultimate goal is to streamline the process of onboarding you to our load testing tool, k6. In doing so, we have created a bunch of <a href="https://k6.io/docs/integrations">tools</a> that can help you easily integrate load testing in your infrastructure.</p>

<p><em>Originally published at <a href="https://k6.io/blog/load-testing-with-postman-collections">https://k6.io</a>.</em></p>

    </div>

</article>

<div class="container mx-auto px-2 py-2 clearfix">
    <!-- Use if you want to show previous and next for all posts. -->



  <div class="col-4 sm-width-full left mr-lg-4 mt-3">
    <a class="no-underline border-top-thin py-1 block" href="https://mostafa.dev/blog/load-testing-your-api-with-swagger-openapi-and-k6">
      <span class="h5 bold text-accent">Previous</span>
      <p class="bold h3 link-primary mb-1">Load Testing Your API with Swagger/OpenAPI and k6</p>
      <p>Overview Throughout the years, there has been many attempts to devise a universal format for defining Web API specifications. The...</p>
    </a>
  </div>
  
  
  <div class="col-4 sm-width-full left mt-3">
    <a class="no-underline border-top-thin py-1 block" href="https://mostafa.dev/blog/devrel-content-strategies">
      <span class="h5 bold text-accent">Next</span>
      <p class="bold h3 link-primary mb-1">DevRel Content Strategies</p>
      <p>The very first [developer relations online meetup](https://devrel.events/developer-relations-online-event/) of Stockholm was streamed live on Facebook on April 15, 2020. It was...</p>
    </a>
  </div>


</div>
    </div>

    <div class="border-top-thin clearfix mt-2 mt-lg-4">
  <div class="container mx-auto px-2">
    <p class="col-8 sm-width-full left py-2 mb-0">This project is maintained by <a class="text-accent" href="https://github.com/mostafa">mostafa</a></p>
    <ul class="list-reset right clearfix sm-width-full py-2 mb-2 mb-lg-0">
      <li class="inline-block mr-1">
        <a href="https://twitter.com/share" class="twitter-share-button" data-hashtags="Mostafa's personal blog">Tweet</a> <script>!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+'://platform.twitter.com/widgets.js';fjs.parentNode.insertBefore(js,fjs);}}(document, 'script', 'twitter-wjs');</script>
      </li>
      <li class="inline-block">
        <a class="github-button" href="https://github.com/mostafa/" data-icon="octicon-star" data-count-href="mostafa//stargazers" data-count-api="/repos/mostafa/#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star mostafa/ on GitHub">Star</a>
      </li>
    </ul>
  </div>
</div>


  </body>

</html>
